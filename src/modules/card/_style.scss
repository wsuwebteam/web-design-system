@import '../../../_assets/scss/variables';
@import '../../../_assets/scss/mixins';

.wsu-card {

    margin-bottom: $wsu-spacing--component;
    box-sizing: border-box;

    &[class*="wsu-color-background"] {

        border-radius: 3px;

        .wsu-card__content {
            padding-left: $wsu-spacing--medium;
            padding-right: $wsu-spacing--medium;

        }

    }

    // Legacy Code
    &__wrapper {

        margin-left: -$wsu-spacing--small;
        margin-right: -$wsu-spacing--small;

        display: flex;
        flex-wrap: wrap;

        &.wsu-per-row {

            &--2 {

                .wsu-card {
                    width: calc( 50% - ( #{ $wsu-spacing--small } * 2 ) );
                    flex-grow: 0;
                    flex-shrink: 0;
                    margin-left: $wsu-spacing--small;
                    margin-right: $wsu-spacing--small;
                }

                @media screen and (max-width: $wsu-breakpoint--tablet ) {
                    width: calc( 100% - ( #{ $wsu-spacing--small } * 2 ) );
                }
            }

            &--3 {

                .wsu-card {
                    width: calc( 33.33% - ( #{ $wsu-spacing--small } * 2 ) );
                    flex-grow: 0;
                    flex-shrink: 0;
                    margin-left: $wsu-spacing--small;
                    margin-right: $wsu-spacing--small;

                    @media screen and (max-width: $wsu-breakpoint--tablet ) {
                        width: calc( 100% - ( #{ $wsu-spacing--small } * 2 ) );
                    }
                }

            }

            &--4 {

                .wsu-card {

                    width: calc( 25% - ( #{ $wsu-spacing--small } * 2 ) );
                    flex-grow: 0;
                    flex-shrink: 0;
                    margin-left: $wsu-spacing--small;
                    margin-right: $wsu-spacing--small;

                    @media screen and (max-width: $wsu-breakpoint--tablet-large ) {
                        width: calc( 50% - ( #{ $wsu-spacing--small } * 2 ) );
                    }

                    @media screen and (max-width: $wsu-breakpoint--phone ) {
                        width: calc( 100% - ( #{ $wsu-spacing--small } * 2 ) );
                    }
                }

            }

        }

    }

    &__content {
        padding-top: $wsu-spacing--small;
        padding-bottom: $wsu-spacing--medium;
    }

    &__person-name {
        @include wsu-font--medium();
        font-weight: 600;
        margin: 0;
        padding: 0;
    }

    &__person-title {
        @include wsu-font--xsmall();
        font-weight: 400;
        margin: 0;
        padding: 0;
    }

    &__person-title + [class*="wsu-meta"],
    &__person-name + [class*="wsu-meta"] {
        margin-top: $wsu-spacing--small;
    }


    .wsu-title {
        margin-bottom: $wsu-spacing--xxsmall;
        padding-top: 0;

        & + .wsu-meta-date {
            margin-top: -0.4rem;
        }

        &:last-child {
            margin-bottom: 0;
        }
    }

    .wsu-image-frame {

        &:last-child {
            margin-bottom: 0;
            margin-top: $wsu-spacing--small;
        }
    }

    .wsu-caption {
        @include wsu-font--small();

        p {
            @include wsu-font--small();
            margin-bottom: 0;
        }



        &:not(:first-child) {

            margin-top: $wsu-spacing--small;

        }

        &:not(:last-child) {

            margin-bottom: $wsu-spacing--small;

        }
    }

    [class*="wsu-meta"] + [class*="wsu-meta"] {
        margin-top: $wsu-spacing--sxxsmall;
        margin-bottom: $wsu-spacing--sxxsmall;
    }

    &--horizontal {
        display: flex;
        align-items: flex-start;

        & + .wsu-card--horizontal {
            margin-top: $wsu-spacing--xxmedium;
        }

        .wsu-image-frame {
            width: 200px;
            flex-grow: 0;
            flex-shrink: 0;
            margin-right: $wsu-spacing--xmedium;
            margin-bottom: 0 !important;
            margin-top: 0 !important;

            &::before {
                padding-top: $wsu-ratio--6-4;
            }
        }

        .wsu-title {
            font-size: $wsu-font-size--large;
            line-height: 1.3;
            padding-top: 0;
        }

        .wsu-image-frame:last-child {
            margin-left: $wsu-spacing--xxmedium;
        }

    }

    &--small {

        & + .wsu-card--horizontal {
            margin-top: 0;
        }

        .wsu-title {
            font-size: $wsu-font-size--small;
            line-height: 1.3;
        }

        .wsu-caption {
            @include wsu-font--xsmall();
        }
    }

    &--large {

        & + .wsu-card--horizontal {
            margin-top: 0;
        }

        .wsu-title {
            font-size: $wsu-font-size--large;
            line-height: 1.3;
        }

        .wsu-caption {
            @include wsu-font--small();
        }
    }

}

.wsu-card--boxed, // Legacy support
.wsu-card--outline-boxed .wsu-card,
.wsu-card--outline-boxed.wsu-card {

    border: 1px solid $wsu-color--gray-10;
    border-radius: $wsu-border-radius--xsmall;

    .wsu-card__content {
        padding-left: $wsu-spacing--medium;
        padding-right: $wsu-spacing--medium;
    }

    .wsu-image-frame img {
        border-radius: $wsu-border-radius--xsmall $wsu-border-radius--xsmall 0 0;
    }


}

.wsu-card--outline-shadow .wsu-card,
.wsu-card--outline-shadow.wsu-card {

    border-radius: $wsu-border-radius--xsmall;
    box-shadow: $wsu-dropshadow--xlow;
    border-radius: 4px;

    .wsu-card__content {
        padding-left: $wsu-spacing--medium;
        padding-right: $wsu-spacing--medium;
    }

    .wsu-image-frame img {
        border-radius: $wsu-border-radius--xsmall $wsu-border-radius--xsmall 0 0;
    }
}


.wsu-row--sidebar-right .wsu-column:last-child .wsu-card__wrapper .wsu-card,
.wsu-row--sidebar-right .wsu-column:first-child .wsu-card__wrapper .wsu-card,
.wsu-row--sidebars .wsu-column:first-child .wsu-card__wrapper .wsu-card,
.wsu-row--sidebars .wsu-column:last-child .wsu-card__wrapper .wsu-card,
.wsu-row--thirds .wsu-card__wrapper .wsu-card,
.wsu-row--quarters .wsu-card__wrapper .wsu-card {
    width: calc( 100% - ( #{ $wsu-spacing--small } * 2 ) ) !important;
}

//Redesign

//codepen
@mixin magic-border( $width, $color, $duration ) {
	//position: relative;
	  &::before {
      content: '';
      position: absolute;
      z-index: 1;
      width: 100%;
      height: 100%;
      //width: calc(100% + #{$width * 2});
      //height:calc(100% + #{$width * 2});
      top: 0;
      left: 0;
      background:
        linear-gradient(to right, $color 0%, $color 100%), //bottom
        linear-gradient(to top, $color 50%, transparent 50%), //left
        linear-gradient(to top, $color 50%, transparent 50%), //right
        linear-gradient(to right, $color 0%, $color 100%), //top right
        linear-gradient(to left, $color 0%, $color 100%); //top left
      background-size: 100% $width, $width 200%, $width 200%, 0% $width, 0% $width;
      background-position: 100% 100%, 0% 0%, 100% 0%, 100% 0%, 0% 0%;
      background-repeat: no-repeat, no-repeat;
      transition: transform $duration ease-in-out, background-position $duration ease-in-out, background-size $duration ease-in-out;
      transform: scaleY(0) rotate(90deg);
      //transform: scaleX(0);
      transition-delay: $duration*2, $duration, 0s;
	  }
	  &:hover{
      &::before{
        background-size: 200% $width, $width 400%, $width 400%, 55% $width, 55% $width;
        background-position: 100% 100%, 0% 100%, 100% 100%, 100% 0%, 0% 0%;
        transform: scaleY(1) rotate(90deg);
        //transform: scaleX(1);
        transition-delay: 0s, $duration, $duration*2;
      }
	  }
  }

.wsu-card--framed {
	position: relative;
	min-height: 500px;
	transition: all .5s ease;
	margin: 0;
	padding: $wsu-spacing--medium;
  display: flex;
  align-items: flex-end;
	@include magic-border(26px, $wsu-color--crimson-light, 0.4s);

	&:hover {
		transform: translateY(-15px);
		transition: all .5s ease;
	}

	.wsu-image-frame {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;

		&::after {
			content: '';
			background: linear-gradient(0deg, black 25%, transparent);
			width: 100%;
			height: 100%;
			display: block;
			position: absolute;
			bottom: 0;
			left: 0;
			opacity: 80%;
			z-index: 0;
		}
	}

	.wsu-card__framed-link {
		display: block;
		width: 100%;
		height: 100%;
		position: absolute;
		top: 0;
		left: 0;
		text-decoration: none;
    font-size: 0;
    z-index: 2;
	}

	.wsu-card__content {
		position: relative;
		color: #fff;
		padding: $wsu-spacing--xsmall;
		z-index: 2;
	}

  .wsu-title {
    font-size: $wsu-font-size--large;
  }

  .wsu-caption {
    font-weight: $wsu-font-weight--medium;
  }

	.wsu-card__button {
		position: absolute;
		right: 5px;
		bottom: 5px;
		z-index: 2;
	}

	button {
		width: 35px;
		height: 35px;
		padding: 6px 3px;
		transform: rotate(-45deg);
		background: rgba(0,0,0,0.9);
		border-radius: 50%;
		border: 0;
		cursor: pointer;
	}

	i {
		color: #fff;
	}

	i::before {
		font-family: wsu-icons !important;
		font-style: normal;
		font-weight: normal !important;
		font-size: $wsu-font-size--xmedium;
	}

	.wsu-card__custom-border {
		position: absolute;
		display: block;
		width: 100%;
		height: 100%;
		outline: 1px solid #fff9;
		outline-offset: -14px;
		top: 0;
		left: 0;
		z-index: 1;

		&::before {
			content: '';
			position: absolute;
			left: 0;
			bottom: 22%;
			height: 14%;
			border-left: 26px solid $wsu-color--crimson-light;
			z-index: -1;
		}
	}
}

@media screen and (prefers-reduced-motion: reduce) {
  .wsu-card--framed {
    @include magic-border(0px, $wsu-color--crimson-light, 0.3s);

    &:hover {
      transition: all 1s ease;
    }
  }
}
